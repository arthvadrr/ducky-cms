/*
 * Admin menu: primary navigation and animated desktop submenu
 *
 * Primary navigation block
 */
aside {
  nav {
    flex-grow: 1;
    background-color: var(--color-bg-dark);

    .nav-inner {
      ul {
        display: flex;
        flex-direction: column;
        justify-content: center;
        list-style: none;
        margin: 0;
        padding: 0;

        li {
          width: 100%;

          a,
          summary {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            text-decoration: none;
            color: var(--color-text-light);
            background: none;
            width: 100%;
            cursor: pointer;
            list-style: none;
            transition: background-color 0.2s ease, color 0.2s ease;

            .menu-name {
              flex: 1;
            }

            /*
             * Focus ring
             */
            &:focus-visible {
              outline: 2px solid var(--color-accent-primary);
              outline-offset: -2px;
            }

            &[aria-current="page"] {
              cursor: default;
              background-color: var(--color-bg-medium);
              color: var(--color-accent-primary);

              svg {
                .primary {
                  fill: var(--color-accent-primary);
                }

                .secondary {
                  fill: rgba(0, 255, 178, 0.4);
                }
              }
            }

            &:hover:not([aria-current="page"]) {
              background-color: rgba(255, 255, 255, 0.05);
            }

            svg {
              flex-shrink: 0;
              fill: #fff;
              transition: fill 0.2s ease;
            }

            /*
             * Chevron indicator
             */
            .chevron {
              flex-shrink: 0;
              width: 0.375rem;
              height: 0.375rem;
              border-right: 2px solid var(--color-text-light);
              border-top: 2px solid var(--color-text-light);
              transform: rotate(135deg);
              transition: transform 0.2s ease, border-color 0.2s ease;
            }
          }
        }
      }
    }
  }
}

/*
 * Two-level submenu (animated reveal; works with click/keyboard; hover-only extras gated below)
 */
aside {
  nav {
    .nav-inner {
      ul {
        li {
          position: relative;

          >details>ul.submenu {
            display: block;
            position: relative;
            list-style: none;
            margin: 0;
            padding: 0;
            background-color: var(--color-bg-medium);
            max-height: 0;
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            overflow: hidden;
            transform-origin: top;
            transform: translateY(-4px);
            transition: max-height 600ms ease, opacity 180ms ease, transform 220ms ease;

            li {
              a {
                display: block;
                padding: 0.5rem 1rem;
                color: var(--color-text-light);
                text-align: left;
                text-decoration: none;
                border-left: 3px solid transparent;
                transition: background-color 0.2s ease, color 0.2s ease;

                &[aria-current="page"] {
                  cursor: default;
                  color: var(--color-accent-primary);
                  border-left: 3px solid var(--color-accent-primary);
                }

                &:hover:not([aria-current="page"]) {
                  background-color: rgba(255, 255, 255, 0.05);
                  color: var(--color-accent-primary);
                }
              }
            }
          }

          >details[open]>ul.submenu {
            max-height: 100vh;
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
            transform: translateY(0);
          }

          >details[open]>summary .chevron {
            transform: rotate(-45deg);
          }
        }
      }
    }
  }
}

/*
 * Reduced motion override
 */
@media (prefers-reduced-motion: reduce) {
  aside {
    nav {
      .nav-inner {
        ul {
          li {
            >details>ul.submenu {
              transition: none;
            }
          }
        }
      }
    }
  }
}